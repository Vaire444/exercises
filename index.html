<!DOCTYPE html>
<html lang="en">
  <head></head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Harjutamiseks</title>
  </head>
  <body>
    <h3>Liitmine</h3>
    <p>
      1. Lihtne liitmine – teha vorm kus on kolm lahtrit: väärtus1, väärtust2 ja
      tulemuse lahter. Lisaks on nupp, millel vajutades liidetakse lahtritest
      väärtus1 ja 2 asjad ja pannakse lahtrisse tulemus
    </p>
    <input id="add1" type="text" value="" placeholder="Sisesta number " /> +
    <input id="add2" type="text" value="" placeholder="Sisesta number" /> =
    <input id="resultAdd" type="text" value="" placeholder="Vastus" disabled />
    <button id="calcAdd" disabled="true">Arvuta</button>
    <button id="emptyAdd" hidden="true">Tühjenda</button>
    
    <h3>Lahutamine</h3>
    <p>2. Sama nagu punkt 1 aga nüüd teostame lahutamise</p>
    <input id="subtract1" type="text" placeholder="Sisesta number" /> -
    <input id="subtract2" type="text" placeholder="Sisesta number" /> =
    <input id="subtractRes" type="text" placeholder="Vastus" disabled />
    <button id="calcSubBtn" disabled="true">Arvuta</button>
    <button id="resetSubtract" hidden="true">Tühjenda</button>

    <h3>Korrutamine</h3>
    <p>3. Sama nagu punkt 1 aga nüüd teostame korrutamise</p>
    <input id="multiply1" type="text" placeholder="Sisesta number" /> x
    <input id="multiply2" type="text" placeholder="Sisesta number" /> =
    <input id="multiplyRes" type="text" placeholder="Vastus" disabled />
    <button id="calcMultiplyBtn" disabled="true">Arvuta</button>
    <button id="resetMultiply" hidden="true">Tühjenda</button>

    <h3>Jagamine</h3>
    <p>
      4. Sama nagu punkt 1 aga nüüd teostame jagamise. PS! 0-ga oskab jagada
      ainult Chuck Norris, seega proovi nii, et JS katki ei lähe
    </p>
    <input id="divide1" type="text" placeholder="Sisesta number" /> /
    <input id="divide2" type="text" placeholder="Sisesta number" /> =
    <input id="divideRes" type="text" placeholder="Vastus" disabled />
    <button id="calcDivideBtn" disabled="true">Arvuta</button>
    <button id="resetDivide" hidden="true">Tühjenda</button>
  </body>
  <script>
    const add1 = document.getElementById("add1");
    const add2 = document.getElementById("add2");
    const resultAdd = document.getElementById("resultAdd");
    const addBtn = document.getElementById("calcAdd");
    const emptyAddBtn = document.getElementById("emptyAdd");

    const subtract1 = document.getElementById("subtract1");
    const subtract2 = document.getElementById("subtract2");
    const subtractRes = document.getElementById("subtractRes");
    const calcSubBtn = document.getElementById("calcSubBtn");
    const emptySubtractBtn = document.getElementById("resetSubtract");

    const multiply1 = document.getElementById("multiply1");
    const multiply2 = document.getElementById("multiply2");
    const multiplyRes = document.getElementById("multiplyRes");
    const calcMultiplyBtn = document.getElementById("calcMultiplyBtn");
    const emptyMultiplyBtn = document.getElementById("resetMultiply");

    const divide1 = document.getElementById("divide1");
    const divide2 = document.getElementById("divide2");
    const divideRes = document.getElementById("divideRes");
    const calcDivideBtn = document.getElementById("calcDivideBtn");
    const emptyDivideBtn = document.getElementById("resetDivide");

    add1.addEventListener("keyup", validateAddForm);
    add2.addEventListener("keyup", validateAddForm);
    addBtn.addEventListener("click", calculateAdd);
    emptyAddBtn.addEventListener("click", resetAdd);

    subtract1.addEventListener("keyup", validateSubForm);
    subtract2.addEventListener("keyup", validateSubForm);
    calcSubBtn.addEventListener("click", calcSubtract);
    emptySubtractBtn.addEventListener("click", resetSubtract);

    multiply1.addEventListener("keyup", validateMultiplyForm);
    multiply2.addEventListener("keyup", validateMultiplyForm);
    calcMultiplyBtn.addEventListener("click", calcMultiply);
    emptyMultiplyBtn.addEventListener("click", resetMultiply);

    divide1.addEventListener("keyup", validateDivideForm);
    divide2.addEventListener("keyup", validateDivideForm);
    calcDivideBtn.addEventListener("click", calcDivide);
    emptyDivideBtn.addEventListener("click",resetDivide);

    function validateAddForm() {
      let firstNum = Number(add1.value);
      let secNum = Number(add2.value);
      if (
        firstNum != "" &&
        secNum != "" &&
        /[+-]?\d+\.?\d*/.test(firstNum) &&
        /[+-]?\d+\.?\d*/.test(secNum)
      ) {
        addBtn.disabled = false;
      } else {
        addBtn.disabled = true;
      }
    }

    function calculateAdd() {
      let firstAddNum = parseFloat(add1.value);
      let secAddNum = parseFloat(add2.value);
      let sumAdd = firstAddNum + secAddNum;
      resultAdd.value = sumAdd;
      addBtn.hidden = true;
      add1.disabled = true;
      add2.disabled = true;
      emptyAddBtn.hidden = false;
    }

    function resetAdd() {
      add1.disabled = false;
      add2.disabled = false;
      addBtn.disabled = true;
      addBtn.hidden = false;
      emptyAddBtn.hidden = true;
      add1.value = "";
      add2.value = "";
      resultAdd.value = "";
    }

    function validateSubForm() {
      let firstNum = Number(subtract1.value);
      let secNum = Number(subtract2.value);
      if (
        firstNum != "" &&
        secNum != "" &&
        /^[0-9]+$/.test(firstNum) &&
        /^[0-9]+$/.test(secNum)
      ) {
        calcSubBtn.disabled = false;
      } else {
        calcSubBtn.disabled = true;
      }
    }

    function calcSubtract() {
      let firstSubNum = parseFloat(subtract1.value);
      let secSubNum = parseFloat(subtract2.value);
      let sumSub = firstSubNum - secSubNum;
      subtractRes.value = sumSub;
      calcSubBtn.hidden = true;
      // subtractRes.disabled = true;
      subtract1.disabled = true;
      subtract2.disabled = true;
      emptySubtractBtn.hidden = false;
    }

    function resetSubtract() {
      subtract1.disabled = false;
      subtract2.disabled = false;
      calcSubBtn.disabled = true;
      calcSubBtn.hidden = false;
      emptySubtractBtn.hidden = true;
      subtract1.value = "";
      subtract2.value = "";
      subtractRes.value = "";
    }

    function validateMultiplyForm() {
      let firstNum = multiply1.value;
      let SecNum = multiply2.value;
      if (firstNum !== '' && 
      SecNum !== '' &&
             /^[0-9]+$/.test(firstNum) &&
              /^[0-9]+$/.test(SecNum)) {
        calcMultiplyBtn.disabled = false;
      } else {
        calcMultiplyBtn.disabled = true;
      }
    }
    function calcMultiply() {
            let firstNum = parseFloat(multiply1.value);
            let secondNum = parseFloat(multiply2.value);
            let sum = firstNum * secondNum;
            multiplyRes.value = sum;
            calcMultiplyBtn.hidden = true;
            multiply1.disabled = true;
            multiply2.disabled = true;
            emptyMultiplyBtn.hidden = false;
        };

        function resetMultiply() {
          multiply1.disabled = false;
          multiply2.disabled = false;
          emptyMultiplyBtn.hidden = true;
            calcMultiplyBtn.hidden = false;
            calcMultiplyBtn.disabled = true;
            multiply1.value = '';
            multiply2.value = '';
            multiplyRes.value = '';
            multiply1.focus();
        }

    function validateDivideForm() {
      let firstNum = Number(divide1.value);
      let secNum = Number(divide2.value);
      if (firstNum != "" && secNum != "" && /[+-]?([0-9]*[.])?[0-9]+$/.test(firstNum) && /[+-]?([0-9]*[.])?[0-9]+$/.test(secNum)) {
        calcDivideBtn.disabled = false;
            } else {
              calcDivideBtn.disabled = true;
            
      }
    }
    
    function calcDivide() {
            let firstNum = parseFloat(divide1.value);
            let secondNum = parseFloat(divide2.value);
            let sum = firstNum / secondNum;
            console.log(sum)
            divideRes.value = sum;
            calcDivideBtn.hidden = true;
            divide1.disabled = true;
            divide2.disabled = true;
            emptyDivideBtn.hidden = false;
        };

        function resetDivide() {
          divide1.disabled = false;
          divide2.disabled = false;
          emptyDivideBtn.hidden = true;
          calcDivideBtn.hidden = false;
          calcDivideBtn.disabled = true
            divide1.value = "";
            divide2.value = "";
            divideRes.value = "";
            divide1.focus();
        }
  </script>
</html>
