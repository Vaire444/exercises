<!DOCTYPE html>
<html lang="en">
  <head></head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Harjutamiseks</title>
  </head>
  <body>
    <h3>Liitmine</h3>
    <p>
      1. Lihtne liitmine – teha vorm kus on kolm lahtrit: väärtus1, väärtust2 ja
      tulemuse lahter. Lisaks on nupp, millel vajutades liidetakse lahtritest
      väärtus1 ja 2 asjad ja pannakse lahtrisse tulemus
    </p>
    <input id="add1" type="text" value="" placeholder="Sisesta number " /> +
    <input id="add2" type="text" value="" placeholder="Sisesta number" /> =
    <input id="resultAdd" type="text" value="" placeholder="Vastus" disabled />
    <button id="calcAdd" disabled="true">Arvuta</button>
    <button id="emptyAdd" hidden="true">Tühjenda</button>
    
    <h3>Lahutamine</h3>
    <p>2. Sama nagu punkt 1 aga nüüd teostame lahutamise</p>
    <input id="subtract1" type="text" placeholder="Sisesta number" /> -
    <input id="subtract2" type="text" placeholder="Sisesta number" /> =
    <input id="subtractRes" type="text" placeholder="Vastus" disabled />
    <button id="calcSubBtn" disabled="true">Arvuta</button>
    <button id="resetSubtract" hidden="true">Tühjenda</button>

    <h3>Korrutamine</h3>
    <p>3. Sama nagu punkt 1 aga nüüd teostame korrutamise</p>
    <input id="multiply1" type="text" placeholder="Sisesta number" /> x
    <input id="multiply2" type="text" placeholder="Sisesta number" /> =
    <input id="multiplyRes" type="text" placeholder="Vastus" disabled />
    <button id="calcMultiplyBtn" disabled="true">Arvuta</button>
    <button id="resetMultiply" hidden="true">Tühjenda</button>

    <h3>Jagamine</h3>
    <p>
      4. Sama nagu punkt 1 aga nüüd teostame jagamise. PS! 0-ga oskab jagada
      ainult Chuck Norris, seega proovi nii, et JS katki ei lähe
    </p>
    <input id="divide1" type="text" placeholder="Sisesta number" /> /
    <input id="divide2" type="text" placeholder="Sisesta number" /> =
    <input id="divideRes" type="text" placeholder="Vastus" disabled />
    <button id="calcDivideBtn" disabled="true">Arvuta</button>
    <button id="resetDivide" hidden="true">Tühjenda</button>

    <h3>Kalkulaator</h3>
    <p>5. Reaalne kalkulaator: Kasutajale kuvatakse väärtust1, siis valikmenüü tehetega (Liitmine, lahutamine, korrutamine ja jagamine), siis lahter teise väärtusega ning kolmas lahter kuhu tulemus kirjutatakse ning lõpuks nupp, mis teostab vastava tehte.</p>
    <input id="value1" type="text" placeholder="Sisesta number" /> 
      <select id="calculation" name="calculation">
      <option value="addition">+</option>
      <option value="subtraction">-</option>
      <option value="multiplication">x</option>
      <option value="division">/</option>
    </select> 
    <input id="value2" type="text" placeholder="Sisesta number" /> =
    <input id="value" type="text" placeholder="Vastus" disabled />
    <button id="calcValueBtn" disabled="true">Arvuta</button>
    <button id="resetValue" hidden="true">Tühjenda</button>

    <h3>Ruutvõrrand</h3>
    <p>
      6. Ruutvõrrandi lahendamine.
      <a
        href="https://www.taskutark.ee/harjuta/ruutvorrand-ja-selle-lahendamine/"
        target="_blank"
        >Ruutvõrrand ja selle lahendamine</a
      >
      Tulemuseks kuvada mõlemad x väärtused
      <br />
      Standardne ruutvõrrandi vorm on:
      <br />
      ax<sup>2</sup> + bx + c = 0, kus a on ruutliikme kordaja (a &#8800 0),b on lineaarliikme kordaja ja c on vabaliige
    </p>

    
    <input id="val1" type="text" value="" , placeholder="Sisesta number a" />x<sup
      >2</sup
    >
    + <input id="val2" type="text" value="" , placeholder="Sisesta number b" />x +
    <input id="val3" type="text" value="" , placeholder="Sisesta number c" /> = 0
    <button id="calcQuadEq" disabled="true">Arvuta x väärtused</button>
    <button id="resetQuadEq" hidden="true">Tühjenda</button>
    <br>
    <br>
    <h4> <a id="x1val" hidden="true" >Vastus: <br>x<sub>1</sub> = </a><a id="x1"></a><br> 
    <a id="x2val" hidden="true" >x<sub>2</sub> = </a><a id="x2"></a></h4>




    <p>
      8. Lugeda ära mitu sõna on tekstis. Kasutaja saab sisestada mitmerealise
      tekstis (textarea) ja süsteem kuvab kasutajale mitu sõna oli. Sõnaks
      loetakse kõik kus enne tühikut on pikem tekst kui kahe-täheline. „Tere ja
      mina“ on 2 sõna. „kuidas sul küll läheb“ on 4 sõna. „ei ja ja on
      sidesõnad“ on 1 sõna.
    </p>
    <textarea id="inputText" cols="60" rows="10"></textarea>
    <br /><br />
    <button id="count">Loenda sõnu</button>
    <p hidden="true" id="result">Sõnu tekstis:<span id="showRes"></span></p>

  </body>
  <script>
    const add1 = document.getElementById("add1");
    const add2 = document.getElementById("add2");
    const resultAdd = document.getElementById("resultAdd");
    const addBtn = document.getElementById("calcAdd");
    const emptyAddBtn = document.getElementById("emptyAdd");

    const subtract1 = document.getElementById("subtract1");
    const subtract2 = document.getElementById("subtract2");
    const subtractRes = document.getElementById("subtractRes");
    const calcSubBtn = document.getElementById("calcSubBtn");
    const emptySubtractBtn = document.getElementById("resetSubtract");

    const multiply1 = document.getElementById("multiply1");
    const multiply2 = document.getElementById("multiply2");
    const multiplyRes = document.getElementById("multiplyRes");
    const calcMultiplyBtn = document.getElementById("calcMultiplyBtn");
    const emptyMultiplyBtn = document.getElementById("resetMultiply");

    const divide1 = document.getElementById("divide1");
    const divide2 = document.getElementById("divide2");
    const divideRes = document.getElementById("divideRes");
    const calcDivideBtn = document.getElementById("calcDivideBtn");
    const emptyDivideBtn = document.getElementById("resetDivide");

    const value1 = document.getElementById("value1")
    const value2 = document.getElementById("value2")
    const value = document.getElementById("value")
    const calculation = document.getElementById("calculation")
    const calcValueBtn = document.getElementById("calcValueBtn")
    const resetValueBtn = document.getElementById("resetValue")

    const val1 = document.getElementById("val1");
    const val2 = document.getElementById("val2");
    const val3 = document.getElementById("val3");
    const calcQuadEq = document.getElementById("calcQuadEq");
    const resetQuadEq = document.getElementById("resetQuadEq");
    const x1 = document.getElementById("x1");
    const x2 = document.getElementById("x2");
    const x1val = document.getElementById("x1val");
    const x2val = document.getElementById("x2val")

    const countBtn = document.getElementById("count");
    const textArea = document.getElementById("inputText");
    const result = document.getElementById("result");
    const showRes = document.getElementById("showRes");

    add1.addEventListener("keyup", validateAddForm);
    add2.addEventListener("keyup", validateAddForm);
    addBtn.addEventListener("click", calculateAdd);
    emptyAddBtn.addEventListener("click", resetAdd);

    subtract1.addEventListener("keyup", validateSubForm);
    subtract2.addEventListener("keyup", validateSubForm);
    calcSubBtn.addEventListener("click", calcSubtract);
    emptySubtractBtn.addEventListener("click", resetSubtract);

    multiply1.addEventListener("keyup", validateMultiplyForm);
    multiply2.addEventListener("keyup", validateMultiplyForm);
    calcMultiplyBtn.addEventListener("click", calcMultiply);
    emptyMultiplyBtn.addEventListener("click", resetMultiply);

    divide1.addEventListener("keyup", validateDivideForm);
    divide2.addEventListener("keyup", validateDivideForm);
    calcDivideBtn.addEventListener("click", calcDivide);
    emptyDivideBtn.addEventListener("click",resetDivide);

    value1.addEventListener("keyup", validateForm)
    value2.addEventListener("keyup", validateForm)
    calculation.addEventListener("change", validateForm)
    calcValueBtn.addEventListener("click", calcValue)
    resetValueBtn.addEventListener("click", resetValue)

    val1.addEventListener("keyup", validation);
    val2.addEventListener("keyup", validation);
    val3.addEventListener("keyup", validation);
    calcQuadEq.addEventListener("click", calcQuadEqVal);
    resetQuadEq.addEventListener("click", resetQuadEqVal);

    countBtn.addEventListener("click", countWords);

    function validateAddForm() {
      let firstNum = add1.value;
      let secNum = add2.value;
      if (
        firstNum != "" &&
        secNum != "" &&
        /^[0-9]+$/.test(firstNum) &&
              /^[0-9]+$/.test(secNum)
      ) {
        addBtn.disabled = false;
      } else {
        addBtn.disabled = true;
      }
    }

    function calculateAdd() {
      let firstAddNum = parseFloat(add1.value);
      let secAddNum = parseFloat(add2.value);
      let sumAdd = firstAddNum + secAddNum;
      resultAdd.value = sumAdd.toFixed(2);
      addBtn.hidden = true;
      add1.disabled = true;
      add2.disabled = true;
      emptyAddBtn.hidden = false;
    }

    function resetAdd() {
      add1.disabled = false;
      add2.disabled = false;
      addBtn.disabled = true;
      addBtn.hidden = false;
      emptyAddBtn.hidden = true;
      add1.value = "";
      add2.value = "";
      resultAdd.value = "";
    }

    function validateSubForm() {
      let firstNum = subtract1.value;
      let secNum = subtract2.value;
      if (
        firstNum != "" &&
        secNum != "" &&
        /^[0-9]+$/.test(firstNum) &&
              /^[0-9]+$/.test(secNum)
      ) {
        calcSubBtn.disabled = false;
      } else {
        calcSubBtn.disabled = true;
      }
    }

    function calcSubtract() {
      let firstSubNum = parseFloat(subtract1.value);
      let secSubNum = parseFloat(subtract2.value);
      let sumSub = firstSubNum - secSubNum;
      subtractRes.value = sumSub.toFixed(2);
      calcSubBtn.hidden = true;
      subtract1.disabled = true;
      subtract2.disabled = true;
      emptySubtractBtn.hidden = false;
    }

    function resetSubtract() {
      subtract1.disabled = false;
      subtract2.disabled = false;
      calcSubBtn.disabled = true;
      calcSubBtn.hidden = false;
      emptySubtractBtn.hidden = true;
      subtract1.value = "";
      subtract2.value = "";
      subtractRes.value = "";
    }

    function validateMultiplyForm() {
      let firstNum = multiply1.value;
      let secNum = multiply2.value;
      if (firstNum !== '' && 
      secNum !== '' &&
             /^[0-9]+$/.test(firstNum) &&
              /^[0-9]+$/.test(secNum)) {
        calcMultiplyBtn.disabled = false;
      } else {
        calcMultiplyBtn.disabled = true;
      }
    }
    function calcMultiply() {
            let firstNum = multiply1.value;
            let secondNum = multiply2.value;
            let sum = firstNum * secondNum;
            multiplyRes.value = sum.toFixed(2);
            calcMultiplyBtn.hidden = true;
            multiply1.disabled = true;
            multiply2.disabled = true;
            emptyMultiplyBtn.hidden = false;
        };

    function resetMultiply() {
          multiply1.disabled = false;
          multiply2.disabled = false;
          emptyMultiplyBtn.hidden = true;
            calcMultiplyBtn.hidden = false;
            calcMultiplyBtn.disabled = true;
            multiply1.value = '';
            multiply2.value = '';
            multiplyRes.value = '';
            multiply1.focus();
        }

    function validateDivideForm() {
      let firstNum = divide1.value;
      let secNum = divide2.value;
      if (firstNum != "" && secNum != "" && /[+-]?([0-9]*[.])?[0-9]+$/.test(firstNum) && /[+-]?([0-9]*[.])?[0-9]+$/.test(secNum)) {
        calcDivideBtn.disabled = false;
            } else {
              calcDivideBtn.disabled = true;
            
      }
    }
    
    function calcDivide() {
            let firstNum = parseFloat(divide1.value);
            let secondNum = parseFloat(divide2.value);
            let sum = firstNum / secondNum;
            divideRes.value = sum.toFixed(2);
            calcDivideBtn.hidden = true;
            divide1.disabled = true;
            divide2.disabled = true;
            emptyDivideBtn.hidden = false;
        };

    function resetDivide() {
          divide1.disabled = false;
          divide2.disabled = false;
          emptyDivideBtn.hidden = true;
          calcDivideBtn.hidden = false;
          calcDivideBtn.disabled = true
            divide1.value = "";
            divide2.value = "";
            divideRes.value = "";
            divide1.focus();
        }

    function validateForm(){
      console.log("funk algas " + calculation.value)
      let firstNum = value1.value;
      let secNum = value2.value;
      if (calculation.value == "addition" || calculation.value == "subtraction" || calculation.value == "multiplication"
      ){
        if ( firstNum != "" && secNum != "" &&  /^[0-9]+$/.test(firstNum) &&
              /^[0-9]+$/.test(secNum))
        {
          calcValueBtn.disabled = false;
        } else {
              calcValueBtn.disabled = true;
      }        
      }
      else if(calculation.value == "division" ){
        console.log("test")
        if (firstNum != "" && secNum != "" && /[+-]?([1-9]*[.])?[0-9]+$/.test(firstNum) && /[+-]?([1-9]*[.])?[1-9]+$/.test(secNum))
         {
          calcValueBtn.disabled = false;
        } else {
              calcValueBtn.disabled = true;              
      }        
      } else{
        calcValueBtn.disabled = true;
      }
    }

    function calcValue() {
      let firstAddNum = parseFloat(value1.value);
      let secAddNum = parseFloat(value2.value);
      if (calculation.value == "addition"){
        let sum = firstAddNum + secAddNum;
        value.value = sum.toFixed(2);
      }else if(calculation.value == "subtraction"){
        let sum = firstAddNum - secAddNum;
        value.value = sum.toFixed(2);
      }else if(calculation.value == "multiplication"){
        let sum = firstAddNum * secAddNum;
        value.value = sum.toFixed(2);
      }else{
        let sum = firstAddNum / secAddNum;
        value.value = sum.toFixed(2);
      }
      
      calcValueBtn.hidden = true;
      value1.disabled = true;
      value2.disabled = true;
      calculation.disabled = true
      resetValueBtn.hidden = false;
    }
    function resetValue() {
      value1.disabled = false;
      value2.disabled = false;
      resetValueBtn.hidden = true;
      calcValueBtn.hidden = false;
      calcValueBtn.disabled = true;
      calculation.disabled = false;
      value1.value = "";
      value2.value = "";
      value.value = "";
    }
    function validation() {
      let num1 = val1.value;
      let num2 = val2.value;
      let num3 = val3.value;
      if (
        num1 !== "" &&
        num2 !== "" &&
        num3 !== "" &&
        /[+-]?([1-9]*[.])?[1-9]+$/.test(num1) &&
        /[+-]?[0-9]+$/.test(num2) &&
        /[+-]?[0-9]+$/.test(num3)
      ) {
        calcQuadEq.disabled = false;
      } else {
        calcQuadEq.disabled = true;
      }
    }

    function calcQuadEqVal() {
      let a = val1.value;
      let b = val2.value;
      let c = val3.value;

      let root1 = null
      let root2 = null 

      let discriminant = b * b - 4 * a * c;

      if (discriminant > 0){
        root1 = ((-b + Math.sqrt(discriminant)) / (2 * a)).toFixed(2);
        root2 = ((-b - Math.sqrt(discriminant)) / (2 * a)).toFixed(2);
        document.getElementById("x1").innerHTML = `${root1}`
        document.getElementById("x2").innerHTML = `${root2}`
        showValues()
        
      }else if (discriminant == 0){
        root1 = root2 = (-b / (2 * a)).toFixed(2);
        document.getElementById("x1").innerHTML = `${root1}`
        document.getElementById("x2").innerHTML = `${root2}`
        showValues()

      }else {
        document.getElementById("x1").innerHTML = "Lahend puudub"
        document.getElementById("x2").innerHTML = "Lahend puudub"
        showValues()

      }

      function showValues(){
        val1.disabled = true;
        val2.disabled = true;
        val3.disabled = true;
        calcQuadEq.hidden = true;
        resetQuadEq.hidden = false;
        x1val.hidden = false
        x2val.hidden = false
        x1.hidden = false;
        x2.hidden = false;
      }
  
    }

    function resetQuadEqVal(){
      val1.disabled = false;
        val2.disabled = false;
        val3.disabled = false;
        calcQuadEq.disabled = true
        calcQuadEq.hidden = false;
        resetQuadEq.hidden = true;        
        x1val.hidden = true;
        x2val.hidden = true;
        val1.value = null;
        val2.value = null;
        val3.value = null;
        x1.hidden = true;
        x2.hidden = true;

    }
    function countWords() {
      let text = textArea.value + " ";
      let numChar = 0;
      let numWords = 0;
      let currentChar = "";
      for (let i = 0; i < text.length + 1; i++) {
        currentChar = text[i];
        if (currentChar == " " || currentChar == "\n") {
          if (numChar < 3) {
            numChar = 0;
          } else {
            numWords += 1;
            numChar = 0;
          }
        } else {
          numChar += 1;
        }
      }
      result.hidden = false;
      showRes.hidden = false;
      showRes.innerHTML = numWords;
    }

  </script>
</html>
